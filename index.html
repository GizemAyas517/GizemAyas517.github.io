 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pebble Sequence Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 to-slate-800 min-h-screen flex items-center justify-center p-4">
    <div class="bg-slate-800 rounded-2xl shadow-2xl p-8 max-w-2xl w-full">
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-4xl font-bold text-white">Pebble Sequence</h1>
            <button id="resetBtn" class="bg-slate-700 hover:bg-slate-600 text-white p-3 rounded-lg transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                    <path d="M21 3v5h-5"/>
                    <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                    <path d="M8 16H3v5"/>
                </svg>
            </button>
        </div>

        <div class="mb-6 text-slate-300 text-center">
            <p id="triesLeft">Guess the 5-pebble color sequence â€¢ 4 tries left</p>
        </div>

        <!-- Previous Guesses -->
        <div id="guessesContainer" class="space-y-5 mb-6"></div>

        <!-- Current Guess -->
        <div id="currentGuessSection">
            <div class="flex gap-6 justify-center mb-4" id="currentGuessDisplay"></div>
            <div class="flex gap-2 justify-center">
                <button id="removeBtn" class="bg-red-600 hover:bg-red-700 disabled:bg-slate-700 disabled:cursor-not-allowed text-white px-6 py-2 rounded-lg transition-colors">
                    Remove
                </button>
                <button id="submitBtn" class="bg-green-600 hover:bg-green-700 disabled:bg-slate-700 disabled:cursor-not-allowed text-white px-6 py-2 rounded-lg transition-colors">
                    Submit
                </button>
            </div>
        </div>

        <!-- Color Palette -->
        <div id="colorPalette" class="mb-6">
            <p class="text-slate-400 text-center mb-3">Choose a pebble color:</p>
            <div class="grid grid-cols-4 gap-3 max-w-md mx-auto" id="colorButtons"></div>
        </div>

        <!-- Game Over -->
        <div id="gameOverSection" class="text-center hidden">
            <div id="gameOverMessage" class="text-3xl font-bold mb-4"></div>
            <div id="secretReveal" class="hidden">
                <p class="text-slate-300 mb-3">The sequence was:</p>
                <div class="flex gap-6 justify-center mb-4" id="secretDisplay"></div>
            </div>
        </div>

        <!-- Legend -->
        <div class="mt-8 pt-6 border-t border-slate-700 text-slate-400 text-sm">
            <p class="mb-2 font-semibold">How to play:</p>
            <ul class="space-y-1">
                <li>â€¢ Green ring = correct color in correct position</li>
                <li>â€¢ Yellow ring = correct color in wrong position</li>
                <li>â€¢ No ring = color not in sequence</li>
            </ul>
        </div>
    </div>

    <script>
        const COLORS = [
            { name: 'red', hex: '#ef4444' },
            { name: 'blue', hex: '#3b82f6' },
            { name: 'green', hex: '#22c55e' },
            { name: 'yellow', hex: '#eab308' },
            { name: 'purple', hex: '#a855f7' },
            { name: 'orange', hex: '#f97316' },
            { name: 'pink', hex: '#ec4899' },
            { name: 'cyan', hex: '#06b6d4' }
        ];

        const SEQUENCE_LENGTH = 5;
        const MAX_TRIES = 4;

        let secret = [];
        let guesses = [];
        let currentGuess = [];
        let gameOver = false;
        let won = false;

        function startNewGame() {
            secret = Array(SEQUENCE_LENGTH).fill(0).map(() =>
                COLORS[Math.floor(Math.random() * COLORS.length)]
            );
            guesses = [];
            currentGuess = [];
            gameOver = false;
            won = false;
            render();
        }

        function addPebble(color) {
            if (gameOver || currentGuess.length >= SEQUENCE_LENGTH) return;
            currentGuess.push(color);
            render();
        }

        function removePebble() {
            if (currentGuess.length === 0) return;
            currentGuess.pop();
            render();
        }

        function submitGuess() {
            if (currentGuess.length !== SEQUENCE_LENGTH || gameOver) return;

            guesses.push([...currentGuess]);

            const isCorrect = currentGuess.every((color, i) => color.name === secret[i].name);

            if (isCorrect) {
                won = true;
                gameOver = true;
            } else if (guesses.length >= MAX_TRIES) {
                gameOver = true;
            }

            currentGuess = [];
            render();
        }

        function getFeedback(guess) {
            return guess.map((color, i) => {
                if (color.name === secret[i].name) {
                    return 'correct';
                }
                if (secret.some(s => s.name === color.name)) {
                    return 'present';
                }
                return 'absent';
            });
        }

        function render() {
            // Update tries left
            document.getElementById('triesLeft').textContent =
                `Guess the 5-pebble color sequence â€¢ ${MAX_TRIES - guesses.length} tries left`;

            // Render previous guesses
            const guessesContainer = document.getElementById('guessesContainer');
            guessesContainer.innerHTML = '';
            guesses.forEach(guess => {
                const feedback = getFeedback(guess);
                const row = document.createElement('div');
                row.className = 'flex gap-6 justify-center';
                guess.forEach((color, i) => {
                    const pebbleContainer = document.createElement('div');
                    pebbleContainer.className = 'relative flex items-center justify-center';

                    const pebble = document.createElement('div');
                    pebble.className = 'w-16 h-16 rounded-full shadow-lg';
                    pebble.style.backgroundColor = color.hex;
                    pebbleContainer.appendChild(pebble);

                    if (feedback[i] === 'correct') {
                        const ring = document.createElement('div');
                        ring.className = 'absolute w-20 h-20 rounded-full border-4 border-green-400 animate-pulse pointer-events-none';
                        pebbleContainer.appendChild(ring);
                    } else if (feedback[i] === 'present') {
                        const ring = document.createElement('div');
                        ring.className = 'absolute w-20 h-20 rounded-full border-4 border-yellow-400 pointer-events-none';
                        pebbleContainer.appendChild(ring);
                    }

                    row.appendChild(pebbleContainer);
                });
                guessesContainer.appendChild(row);
            });

            // Render current guess
            const currentGuessDisplay = document.getElementById('currentGuessDisplay');
            currentGuessDisplay.innerHTML = '';
            for (let i = 0; i < SEQUENCE_LENGTH; i++) {
                const slot = document.createElement('div');
                slot.className = 'w-16 h-16 rounded-full border-4 border-dashed border-slate-600 flex items-center justify-center';
                if (currentGuess[i]) {
                    slot.style.backgroundColor = currentGuess[i].hex;
                }
                currentGuessDisplay.appendChild(slot);
            }

            // Update buttons
            document.getElementById('removeBtn').disabled = currentGuess.length === 0;
            document.getElementById('submitBtn').disabled = currentGuess.length !== SEQUENCE_LENGTH;

            // Render color palette
            const colorButtons = document.getElementById('colorButtons');
            colorButtons.innerHTML = '';
            COLORS.forEach(color => {
                const btn = document.createElement('button');
                btn.className = 'w-14 h-14 rounded-full shadow-lg hover:scale-110 transition-transform disabled:cursor-not-allowed disabled:opacity-50';
                btn.style.backgroundColor = color.hex;
                btn.disabled = currentGuess.length >= SEQUENCE_LENGTH || gameOver;
                btn.onclick = () => addPebble(color);
                colorButtons.appendChild(btn);
            });

            // Show/hide sections
            document.getElementById('currentGuessSection').style.display = gameOver ? 'none' : 'block';
            document.getElementById('colorPalette').style.display = gameOver ? 'none' : 'block';
            document.getElementById('gameOverSection').classList.toggle('hidden', !gameOver);

            if (gameOver) {
                const msg = document.getElementById('gameOverMessage');
                msg.textContent = won ? 'ðŸŽ‰ You Won!' : 'ðŸ˜” Game Over';
                msg.className = `text-3xl font-bold mb-4 ${won ? 'text-green-400' : 'text-red-400'}`;

                document.getElementById('secretReveal').classList.toggle('hidden', won);

                if (!won) {
                    const secretDisplay = document.getElementById('secretDisplay');
                    secretDisplay.innerHTML = '';
                    secret.forEach(color => {
                        const pebble = document.createElement('div');
                        pebble.className = 'w-16 h-16 rounded-full shadow-lg';
                        pebble.style.backgroundColor = color.hex;
                        secretDisplay.appendChild(pebble);
                    });
                }
            }
        }

        // Event listeners
        document.getElementById('resetBtn').onclick = startNewGame;
        document.getElementById('removeBtn').onclick = removePebble;
        document.getElementById('submitBtn').onclick = submitGuess;

        // Start the game
        startNewGame();
    </script>
</body>
</html>